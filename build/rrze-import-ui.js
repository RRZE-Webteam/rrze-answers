!function(e){"use strict";function n(n,r){e("#rrze-answers-cats-status").text(n||"").css({color:r?"#b32d2e":"#1d2327"})}function r(n){e("#rrze-answers-cats-help").text(n||"")}function a(n,r,a){n.empty();var s=Object.keys(r||{});s.sort((function(e,n){return(r[e]||"").toLowerCase().localeCompare((r[n]||"").toLowerCase())})),s.forEach((function(s){var o=e("<option/>",{value:s,text:r[s]||s});Array.isArray(a)&&-1!==a.indexOf(s)&&o.prop("selected",!0),n.append(o)}))}function s(s){var o=e("#rrze-answers_remote_categories_");if(function(e,n){var r=RRZEAnswersSync.optionName||"rrze-answers",a="import_faq_categories"+(n?"_"+n:"");e.attr("name",r+"["+a+"][]")}(o,s),!s)return o.empty(),n("",!1),void r("");n(RRZEAnswersSync.i18n.loading,!1),r("");var t=RRZEAnswersSync.ajaxUrl,c={action:"rrze_answers_get_categories",_ajax_nonce:RRZEAnswersSync.nonce,shortname:s};console.group("loadCategories debug"),console.log("AJAX URL:",t),console.log("Payload:",c),console.log("Full URL (GET-style):",t+"?"+jQuery.param(c)),e.ajax({url:RRZEAnswersSync.ajaxUrl,type:"POST",dataType:"json",data:{action:"rrze_answers_get_categories",_ajax_nonce:RRZEAnswersSync.nonce,shortname:s}}).done((function(e){if(console.log("resp",e),e&&e.success){var s=e.data.categories||{},t=e.data.selected||[];if(0===Object.keys(s).length)return a(o,{},[]),n(RRZEAnswersSync.i18n.none,!1),void r("");a(o,s,t),n("",!1),r(RRZEAnswersSync.i18n.selectCategories)}else n(e&&e.data&&e.data.message||RRZEAnswersSync.i18n.error,!0)})).fail((function(){n(RRZEAnswersSync.i18n.error,!0)}))}e((function(){var n=e("#rrze-answers_remote_api_url");s(n.val()||""),n.on("change",(function(){s(e(this).val()||"")}))}))}(jQuery);