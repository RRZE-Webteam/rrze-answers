(()=>{"use strict";var e={n:r=>{var l=r&&r.__esModule?()=>r.default:()=>r;return e.d(l,{a:l}),l},d:(r,l)=>{for(var a in l)e.o(l,a)&&!e.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:l[a]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,l=window.wp.i18n,a=window.wp.richText,t=window.wp.blockEditor,n=window.wp.components,s=window.wp.element,o=window.wp.apiFetch;var i=e.n(o);const c=window.ReactJSXRuntime,d="rrze/placeholder";(0,a.registerFormatType)(d,{title:(0,l.__)("Placeholder","rrze-placeholder"),tagName:"abbr",className:"rrze-syn",attributes:{title:"title",lang:"lang","data-pron":"data-pron"},edit:e=>{const{value:r,onChange:o,isActive:h}=e,[p,u]=(0,s.useState)([]),[_,w]=(0,s.useState)(!0),[g,v]=(0,s.useState)(null);(0,s.useEffect)((()=>{let e=!1;return async function(){w(!0),v(null);let r=1;const l=[];try{for(;;){const a=await i()({path:`/wp/v2/placeholder?status=publish&per_page=100&page=${r}&orderby=title&order=asc&_fields=id,title,placeholder,titleLang,meta`});if(e)return;if(l.push(...a),a.length<100)break;r++}u(l)}catch(r){e||v(r)}finally{e||w(!1)}}(),()=>{e=!0}}),[]);const b=(0,s.useMemo)((()=>(p||[]).map((e=>{var r,a,t,n;return{value:String(e.id),label:e?.title?.rendered||(0,l.__)("(no title)","rrze-placeholder"),long:null!==(r=null!==(a=e?.placeholder)&&void 0!==a?a:e?.meta?.placeholder)&&void 0!==r?r:"",lang:null!==(t=null!==(n=e?.titleLang)&&void 0!==n?n:e?.meta?.titleLang)&&void 0!==t?t:""}}))),[p]),[z,x]=(0,s.useState)(!1),[m,y]=(0,s.useState)(""),f=(0,s.useRef)(),j=(0,a.getActiveFormat)(r,d);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.RichTextShortcut,{type:"primaryShift",character:"S",onUse:()=>x(!0)}),(0,c.jsx)("span",{ref:f,children:(0,c.jsx)(t.RichTextToolbarButton,{icon:"translation",title:(0,l.__)("Placeholder","rrze-placeholder"),onClick:()=>x((e=>!e)),isActive:h})}),z&&(0,c.jsx)(n.Popover,{anchorRef:f.current,variant:"toolbar",onClose:()=>x(!1),children:(0,c.jsxs)("div",{style:{padding:12,width:360,maxWidth:"90vw"},children:[_&&(0,c.jsxs)(n.Flex,{align:"center",gap:8,children:[(0,c.jsx)(n.Spinner,{}),(0,c.jsx)("span",{children:(0,l.__)("Loading placeholdersâ€¦","rrze-placeholder")})]}),!_&&g&&(0,c.jsx)(n.Notice,{status:"error",isDismissible:!1,children:(0,l.__)("Failed to load placeholders. Check your REST setup.","rrze-placeholder")}),!_&&!g&&(0,c.jsx)(n.ComboboxControl,{label:(0,l.__)("Choose a placeholder","rrze-placeholder"),help:(0,l.__)("Type to search by title","rrze-placeholder"),value:m,onChange:y,options:b}),(0,c.jsxs)(n.Flex,{style:{marginTop:10},justify:"flex-end",gap:8,children:[!!j&&(0,c.jsx)(n.FlexItem,{children:(0,c.jsx)(n.Button,{variant:"secondary",onClick:()=>{o((0,a.removeFormat)(r,d)),x(!1)},children:(0,l.__)("Remove","rrze-placeholder")})}),(0,c.jsx)(n.FlexItem,{children:(0,c.jsx)(n.Button,{variant:"primary",onClick:()=>{if(!m)return;const e=b.find((e=>e.value===m));if(!e)return;const l={};e.long&&(l.title=e.long),e.lang&&(l.lang=e.lang);let t=r;if(t.start===t.end){const r=e.label||"";if(r){const e=t.text.length;t=(0,a.insert)(t,r);const l=t.text.length-e;t={...t,start:t.end-l,end:t.end}}}t=(0,a.applyFormat)(t,{type:d,attributes:l}),o(t),x(!1),y("")},disabled:!m,children:j?(0,l.__)("Update","rrze-placeholder"):(0,l.__)("Apply","rrze-placeholder")})})]})]})})]})}});const h=JSON.parse('{"UU":"rrze-answers/placeholder"}'),p=window.wp.data,u=window.wp.serverSideRender;var _=e.n(u);(0,r.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:r}){const{register:a,tag:o,id:i,hstart:d,order:h,sort:u,lang:w,additional_class:g,color:v,load_open:b,expand_all_link:z,hide_title:x,hide_accordion:m,placeholderstyle:y,placeholder:f}=e,j=(0,t.useBlockProps)(),[S,C]=(0,s.useState)([""]),[F,R]=(0,s.useState)([""]),[T,k]=(0,s.useState)([""]),E=(0,p.useSelect)((e=>e("core").getEntityRecords("taxonomy","placeholder_category")),[]),P=[{label:(0,l.__)("all","rrze-answers"),value:""}];E&&Object.values(E).forEach((e=>{P.push({label:e.name,value:e.slug})}));const A=(0,p.useSelect)((e=>e("core").getEntityRecords("taxonomy","placeholder_tag")),[]),O=[{label:(0,l.__)("all","rrze-answers"),value:""}];A&&Object.values(A).forEach((e=>{O.push({label:e.name,value:e.slug})}));const B=(0,p.useSelect)((e=>e("core").getEntityRecords("postType","placeholder",{per_page:-1,orderby:"title",order:"asc"})),[]),U=[{label:(0,l.__)("all","rrze-answers"),value:0}];B&&Object.values(B).forEach((e=>{U.push({label:e.title.rendered?e.title.rendered:(0,l.__)("No title","rrze-answers"),value:e.id})}));const L=[{label:(0,l.__)("all","rrze-answers"),value:""},{label:(0,l.__)("German","rrze-answers"),value:"de"},{label:(0,l.__)("English","rrze-answers"),value:"en"},{label:(0,l.__)("French","rrze-answers"),value:"fr"},{label:(0,l.__)("Spanish","rrze-answers"),value:"es"},{label:(0,l.__)("Russian","rrze-answers"),value:"ru"},{label:(0,l.__)("Chinese","rrze-answers"),value:"zh"}];return(0,l.__)("-- hidden --","rrze-answers"),(0,l.__)("A - Z","rrze-answers"),(0,l.__)("Tagcloud","rrze-answers"),(0,l.__)("Tabs","rrze-answers"),(0,l.__)("Title","rrze-answers"),(0,l.__)("ID","rrze-answers"),(0,l.__)("Sort field","rrze-answers"),(0,l.__)("ASC","rrze-answers"),(0,l.__)("DESC","rrze-answers"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.InspectorControls,{children:(0,c.jsxs)(n.PanelBody,{children:[(0,c.jsx)(n.SelectControl,{label:(0,l.__)("placeholder","rrze-answers"),help:(0,l.__)("Show a selection of individual Placeholders","rrze-answers"),value:T,options:U,onChange:e=>{k(e),r({id:String(e)})},multiple:!0}),(0,c.jsx)(n.SelectControl,{label:(0,l.__)("Language","rrze-answers"),help:(0,l.__)("Show only Placeholders matching the selected language.","rrze-answers"),value:w,options:L,onChange:e=>r({lang:e})})]})}),(0,c.jsx)("div",{...j,children:(0,c.jsx)(_(),{block:"rrze-answers/placeholder",attributes:e})})]})},save:function(){return null}})})();