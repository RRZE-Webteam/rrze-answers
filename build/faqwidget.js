(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,a=JSON.parse('{"UU":"rrze-answers/faqwidget"}'),s=window.wp.blockEditor,n=window.wp.components,o=window.wp.data,i=window.wp.serverSideRender;var r=e.n(i);const l=window.ReactJSXRuntime,d="rrze_faq",c="rrze_faq_category",p=[{label:"Show question and answer",value:1},{label:"Show question and answer opened",value:2},{label:"Hide question",value:3}];(0,t.registerBlockType)(a.UU,{edit:function({attributes:e,setAttributes:t}){const{id:a,catID:i,start:u,end:g,display:y}=e,{faqs:b,categories:w,isLoadingFaqs:h,isLoadingCategories:v}=(0,o.useSelect)((e=>{const t=e("core"),a={per_page:-1,orderby:"title",order:"asc",status:"publish"},s={per_page:-1,hide_empty:!1,orderby:"name",order:"asc"};return{faqs:t.getEntityRecords("postType",d,a)||[],categories:t.getEntityRecords("taxonomy",c,s)||[],isLoadingFaqs:t.isResolving("getEntityRecords",["postType",d,a]),isLoadingCategories:t.isResolving("getEntityRecords",["taxonomy",c,s])}}),[]),x=(0,s.useBlockProps)(),f=[{label:"— Select FAQ —",value:0},...b.map((e=>({label:e.title?.rendered||`#${e.id}`,value:e.id})))],j=[{label:"— Select category —",value:0},...w.map((e=>({label:e.name,value:e.id})))];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.InspectorControls,{children:[(0,l.jsxs)(n.PanelBody,{title:"FAQ selection",initialOpen:!0,children:[h&&(0,l.jsx)(n.Spinner,{}),!h&&!b.length&&(0,l.jsx)(n.Notice,{status:"warning",isDismissible:!1,children:'No FAQs found (post type "rrze_faq" must be public and show_in_rest).'}),(0,l.jsx)(n.SelectControl,{label:"Choose a FAQ",value:a,options:f,onChange:e=>{const a=parseInt(e,10)||0;t({id:a})},help:"Select a specific FAQ post."}),(0,l.jsx)(n.SelectControl,{label:"Or choose a category to display a random FAQ",value:i,options:j,onChange:e=>{const a=parseInt(e,10)||0;t({catID:a})},disabled:!w.length&&!v,help:"If a category is selected and no specific FAQ is set, a random FAQ from this category will be used."})]}),(0,l.jsxs)(n.PanelBody,{title:"Date range (optional)",initialOpen:!1,children:[(0,l.jsx)(n.TextControl,{label:"Start date",type:"date",value:u,onChange:e=>{t({start:e})}}),(0,l.jsx)(n.TextControl,{label:"End date",type:"date",value:g,onChange:e=>{t({end:e})}})]}),(0,l.jsx)(n.PanelBody,{title:"Display options",initialOpen:!1,children:(0,l.jsx)(n.SelectControl,{label:"Display",value:y||1,options:p,onChange:e=>{const a=parseInt(e,10)||1;t({display:a})}})})]}),(0,l.jsx)("div",{...x,children:(0,l.jsx)(r(),{block:"rrze-answers/faqwidget",attributes:e})})]})},save:function(){return null}})})();