(()=>{"use strict";var e={n:n=>{var r=n&&n.__esModule?()=>n.default:()=>n;return e.d(r,{a:r}),r},d:(n,r)=>{for(var t in r)e.o(r,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:r[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.blocks,r=window.wp.i18n,t=window.wp.richText,s=window.wp.blockEditor,a=window.wp.components,l=window.wp.element,o=window.wp.apiFetch;var i=e.n(o);const c=window.ReactJSXRuntime,d="rrze/synonym";(0,t.registerFormatType)(d,{title:(0,r.__)("Synonym/Acronym","rrze-synonym"),tagName:"abbr",className:"rrze-syn",attributes:{title:"title",lang:"lang","data-pron":"data-pron"},edit:e=>{const{value:n,onChange:o,isActive:y}=e,[u,_]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[h,g]=(0,l.useState)(null);(0,l.useEffect)((()=>{let e=!1;return async function(){p(!0),g(null);let n=1;const r=[];try{for(;;){const t=await i()({path:`/wp/v2/synonym?status=publish&per_page=100&page=${n}&orderby=title&order=asc&_fields=id,title,synonym,titleLang,meta`});if(e)return;if(r.push(...t),t.length<100)break;n++}_(r)}catch(n){e||g(n)}finally{e||p(!1)}}(),()=>{e=!0}}),[]);const w=(0,l.useMemo)((()=>(u||[]).map((e=>{var n,t,s,a;return{value:String(e.id),label:e?.title?.rendered||(0,r.__)("(no title)","rrze-synonym"),long:null!==(n=null!==(t=e?.synonym)&&void 0!==t?t:e?.meta?.synonym)&&void 0!==n?n:"",lang:null!==(s=null!==(a=e?.titleLang)&&void 0!==a?a:e?.meta?.titleLang)&&void 0!==s?s:""}}))),[u]),[v,b]=(0,l.useState)(!1),[z,x]=(0,l.useState)(""),f=(0,l.useRef)(),S=(0,t.getActiveFormat)(n,d);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.RichTextShortcut,{type:"primaryShift",character:"S",onUse:()=>b(!0)}),(0,c.jsx)("span",{ref:f,children:(0,c.jsx)(s.RichTextToolbarButton,{icon:"translation",title:(0,r.__)("Synonym/Acronym","rrze-synonym"),onClick:()=>b((e=>!e)),isActive:y})}),v&&(0,c.jsx)(a.Popover,{anchorRef:f.current,variant:"toolbar",onClose:()=>b(!1),children:(0,c.jsxs)("div",{style:{padding:12,width:360,maxWidth:"90vw"},children:[m&&(0,c.jsxs)(a.Flex,{align:"center",gap:8,children:[(0,c.jsx)(a.Spinner,{}),(0,c.jsx)("span",{children:(0,r.__)("Loading synonymsâ€¦","rrze-synonym")})]}),!m&&h&&(0,c.jsx)(a.Notice,{status:"error",isDismissible:!1,children:(0,r.__)("Failed to load synonyms. Check your REST setup.","rrze-synonym")}),!m&&!h&&(0,c.jsx)(a.ComboboxControl,{label:(0,r.__)("Choose a synonym","rrze-synonym"),help:(0,r.__)("Type to search by title","rrze-synonym"),value:z,onChange:x,options:w}),(0,c.jsxs)(a.Flex,{style:{marginTop:10},justify:"flex-end",gap:8,children:[!!S&&(0,c.jsx)(a.FlexItem,{children:(0,c.jsx)(a.Button,{variant:"secondary",onClick:()=>{o((0,t.removeFormat)(n,d)),b(!1)},children:(0,r.__)("Remove","rrze-synonym")})}),(0,c.jsx)(a.FlexItem,{children:(0,c.jsx)(a.Button,{variant:"primary",onClick:()=>{if(!z)return;const e=w.find((e=>e.value===z));if(!e)return;const r={};e.long&&(r.title=e.long),e.lang&&(r.lang=e.lang);let s=n;if(s.start===s.end){const n=e.label||"";if(n){const e=s.text.length;s=(0,t.insert)(s,n);const r=s.text.length-e;s={...s,start:s.end-r,end:s.end}}}s=(0,t.applyFormat)(s,{type:d,attributes:r}),o(s),b(!1),x("")},disabled:!z,children:S?(0,r.__)("Update","rrze-synonym"):(0,r.__)("Apply","rrze-synonym")})})]})]})})]})}});const y=JSON.parse('{"UU":"rrze-answers/synonym"}'),u=window.wp.data,_=window.wp.serverSideRender;var m=e.n(_);(0,n.registerBlockType)(y.UU,{edit:function({attributes:e,setAttributes:n}){const{register:t,tag:o,id:i,hstart:d,order:y,sort:_,lang:p,additional_class:h,color:g,load_open:w,expand_all_link:v,hide_title:b,hide_accordion:z,synonymstyle:x,synonym:f}=e,S=(0,s.useBlockProps)(),[j,C]=(0,l.useState)([""]),[F,R]=(0,l.useState)([""]),[T,k]=(0,l.useState)([""]),E=(0,u.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_category")),[]),A=[{label:(0,r.__)("all","rrze-answers"),value:""}];E&&Object.values(E).forEach((e=>{A.push({label:e.name,value:e.slug})}));const q=(0,u.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_tag")),[]),O=[{label:(0,r.__)("all","rrze-answers"),value:""}];q&&Object.values(q).forEach((e=>{O.push({label:e.name,value:e.slug})}));const B=(0,u.useSelect)((e=>e("core").getEntityRecords("postType","synonym",{per_page:-1,orderby:"title",order:"asc"})),[]),U=[{label:(0,r.__)("all","rrze-answers"),value:0}];B&&Object.values(B).forEach((e=>{U.push({label:e.title.rendered?e.title.rendered:(0,r.__)("No title","rrze-answers"),value:e.id})}));const L=[{label:(0,r.__)("all","rrze-faq"),value:""},{label:(0,r.__)("German","rrze-faq"),value:"de"},{label:(0,r.__)("English","rrze-faq"),value:"en"},{label:(0,r.__)("French","rrze-faq"),value:"fr"},{label:(0,r.__)("Spanish","rrze-faq"),value:"es"},{label:(0,r.__)("Russian","rrze-faq"),value:"ru"},{label:(0,r.__)("Chinese","rrze-faq"),value:"zh"}];return(0,r.__)("-- hidden --","rrze-answers"),(0,r.__)("A - Z","rrze-answers"),(0,r.__)("Tagcloud","rrze-answers"),(0,r.__)("Tabs","rrze-answers"),(0,r.__)("Title","rrze-answers"),(0,r.__)("ID","rrze-answers"),(0,r.__)("Sort field","rrze-answers"),(0,r.__)("ASC","rrze-answers"),(0,r.__)("DESC","rrze-answers"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.InspectorControls,{children:(0,c.jsxs)(a.PanelBody,{children:[(0,c.jsx)(a.SelectControl,{label:(0,r.__)("synonym","rrze-answers"),help:(0,r.__)("Show a selection of individual Synonyms","rrze-answers"),value:T,options:U,onChange:e=>{k(e),n({id:String(e)})},multiple:!0}),(0,c.jsx)(a.SelectControl,{label:(0,r.__)("Language","rrze-answers"),help:(0,r.__)("Show only Synonyms matching the selected language.","rrze-answers"),value:p,options:L,onChange:e=>n({lang:e})})]})}),(0,c.jsx)("div",{...S,children:(0,c.jsx)(m(),{block:"rrze-answers/synonym",attributes:e})})]})},save:function(){return null}})})();