(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.blocks,n=window.wp.i18n,t=window.wp.richText,s=window.wp.blockEditor,a=window.wp.components,l=window.wp.element,o=window.wp.apiFetch;var i=e.n(o);const c=window.ReactJSXRuntime,d="rrze-answers/synonym";(0,t.registerFormatType)(d,{title:(0,n.__)("Synonym/Acronym","rrze-answers"),tagName:"abbr",className:"rrze-syn",attributes:{title:"title",lang:"lang","data-pron":"data-pron"},edit:e=>{const{value:r,onChange:o,isActive:u}=e,[_,y]=(0,l.useState)([]),[p,w]=(0,l.useState)(!0),[h,m]=(0,l.useState)(null);(0,l.useEffect)((()=>{let e=!1;return async function(){w(!0),m(null);let r=1;const n=[];try{for(;;){const t=await i()({path:`/wp/v2/synonym?status=publish&per_page=100&page=${r}&orderby=title&order=asc&_fields=id,title,synonym,titleLang,meta`});if(e)return;if(n.push(...t),t.length<100)break;r++}y(n)}catch(r){e||m(r)}finally{e||w(!1)}}(),()=>{e=!0}}),[]);const g=(0,l.useMemo)((()=>(_||[]).map((e=>{var r,t,s,a;return{value:String(e.id),label:e?.title?.rendered||(0,n.__)("(no title)","rrze-answers"),long:null!==(r=null!==(t=e?.synonym)&&void 0!==t?t:e?.meta?.synonym)&&void 0!==r?r:"",lang:null!==(s=null!==(a=e?.titleLang)&&void 0!==a?a:e?.meta?.titleLang)&&void 0!==s?s:""}}))),[_]),[v,b]=(0,l.useState)(!1),[z,x]=(0,l.useState)(""),f=(0,l.useRef)(),S=(0,t.getActiveFormat)(r,d);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.RichTextShortcut,{type:"primaryShift",character:"S",onUse:()=>b(!0)}),(0,c.jsx)("span",{ref:f,children:(0,c.jsx)(s.RichTextToolbarButton,{icon:"translation",title:(0,n.__)("Synonym/Acronym","rrze-answers"),onClick:()=>b((e=>!e)),isActive:u})}),v&&(0,c.jsx)(a.Popover,{anchorRef:f.current,variant:"toolbar",onClose:()=>b(!1),children:(0,c.jsxs)("div",{style:{padding:12,width:360,maxWidth:"90vw"},children:[p&&(0,c.jsxs)(a.Flex,{align:"center",gap:8,children:[(0,c.jsx)(a.Spinner,{}),(0,c.jsx)("span",{children:(0,n.__)("Loading synonymsâ€¦","rrze-answers")})]}),!p&&h&&(0,c.jsx)(a.Notice,{status:"error",isDismissible:!1,children:(0,n.__)("Failed to load synonyms. Check your REST setup.","rrze-answers")}),!p&&!h&&(0,c.jsx)(a.ComboboxControl,{label:(0,n.__)("Choose a synonym","rrze-answers"),help:(0,n.__)("Type to search by title","rrze-answers"),value:z,onChange:x,options:g}),(0,c.jsxs)(a.Flex,{style:{marginTop:10},justify:"flex-end",gap:8,children:[!!S&&(0,c.jsx)(a.FlexItem,{children:(0,c.jsx)(a.Button,{variant:"secondary",onClick:()=>{o((0,t.removeFormat)(r,d)),b(!1)},children:(0,n.__)("Remove","rrze-answers")})}),(0,c.jsx)(a.FlexItem,{children:(0,c.jsx)(a.Button,{variant:"primary",onClick:()=>{if(!z)return;const e=g.find((e=>e.value===z));if(!e)return;const n={};e.long&&(n.title=e.long),e.lang&&(n.lang=e.lang);let s=r;if(s.start===s.end){const r=e.label||"";if(r){const e=s.text.length;s=(0,t.insert)(s,r);const n=s.text.length-e;s={...s,start:s.end-n,end:s.end}}}s=(0,t.applyFormat)(s,{type:d,attributes:n}),o(s),b(!1),x("")},disabled:!z,children:S?(0,n.__)("Update","rrze-answers"):(0,n.__)("Apply","rrze-answers")})})]})]})})]})}});const u=JSON.parse('{"UU":"rrze-answers/synonym"}'),_=window.wp.data,y=window.wp.serverSideRender;var p=e.n(y);(0,r.registerBlockType)(u.UU,{edit:function({attributes:e,setAttributes:r}){const{register:t,tag:o,id:i,hstart:d,order:u,sort:y,lang:w,additional_class:h,color:m,load_open:g,expand_all_link:v,hide_title:b,hide_accordion:z,synonymstyle:x,synonym:f}=e,S=(0,s.useBlockProps)(),[j,C]=(0,l.useState)([""]),[F,R]=(0,l.useState)([""]),[T,k]=(0,l.useState)([""]),E=(0,_.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_category")),[]),A=[{label:(0,n.__)("all","rrze-answers"),value:""}];E&&Object.values(E).forEach((e=>{A.push({label:e.name,value:e.slug})}));const q=(0,_.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_tag")),[]),O=[{label:(0,n.__)("all","rrze-answers"),value:""}];q&&Object.values(q).forEach((e=>{O.push({label:e.name,value:e.slug})}));const B=(0,_.useSelect)((e=>e("core").getEntityRecords("postType","synonym",{per_page:-1,orderby:"title",order:"asc"})),[]),U=[{label:(0,n.__)("all","rrze-answers"),value:0}];B&&Object.values(B).forEach((e=>{U.push({label:e.title.rendered?e.title.rendered:(0,n.__)("No title","rrze-answers"),value:e.id})}));const L=[{label:(0,n.__)("all","rrze-faq"),value:""},{label:(0,n.__)("German","rrze-faq"),value:"de"},{label:(0,n.__)("English","rrze-faq"),value:"en"},{label:(0,n.__)("French","rrze-faq"),value:"fr"},{label:(0,n.__)("Spanish","rrze-faq"),value:"es"},{label:(0,n.__)("Russian","rrze-faq"),value:"ru"},{label:(0,n.__)("Chinese","rrze-faq"),value:"zh"}];return(0,n.__)("-- hidden --","rrze-answers"),(0,n.__)("A - Z","rrze-answers"),(0,n.__)("Tagcloud","rrze-answers"),(0,n.__)("Tabs","rrze-answers"),(0,n.__)("Title","rrze-answers"),(0,n.__)("ID","rrze-answers"),(0,n.__)("Sort field","rrze-answers"),(0,n.__)("ASC","rrze-answers"),(0,n.__)("DESC","rrze-answers"),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.InspectorControls,{children:(0,c.jsxs)(a.PanelBody,{children:[(0,c.jsx)(a.SelectControl,{label:(0,n.__)("synonym","rrze-answers"),help:(0,n.__)("Show a selection of individual Synonyms","rrze-answers"),value:T,options:U,onChange:e=>{k(e),r({id:String(e)})},multiple:!0}),(0,c.jsx)(a.SelectControl,{label:(0,n.__)("Language","rrze-answers"),help:(0,n.__)("Show only Synonyms matching the selected language.","rrze-answers"),value:w,options:L,onChange:e=>r({lang:e})})]})}),(0,c.jsx)("div",{...S,children:(0,c.jsx)(p(),{block:"rrze-answers/synonym",attributes:e})})]})},save:function(){return null}})})();