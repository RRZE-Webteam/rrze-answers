{"version":3,"file":"rrze-import-ui.js","mappings":"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","sources":["webpack://rrze-answers/./src/js/rrze-import-ui.js"],"sourcesContent":["/* global jQuery, RRZEAnswersSync */\n(function ($) {\n  'use strict';\n\n  // Helper: set the correct \"name\" attribute on the multiselect based on current site\n  function setSelectName($select, site_url) {\n    var optionName = RRZEAnswersSync.optionName || 'rrze-answers';\n    var key = 'import_faq_categories' + (site_url ? '_' + site_url : '');\n    $select.attr('name', optionName + '[' + key + '][]');\n  }\n\n  function setStatus(msg, isError) {\n    $('#rrze-answers-cats-status')\n      .text(msg || '')\n      .css({ color: isError ? '#b32d2e' : '#1d2327' });\n  }\n\n  function setHelp(msg) {\n    $('#rrze-answers-cats-help').text(msg || '');\n  }\n\n  function populateCategories($select, map, selected) {\n    $select.empty();\n\n    // map: {slug: \"Name\", ...}\n    var keys = Object.keys(map || {});\n    keys.sort(function (a, b) {\n      return (map[a] || '').toLowerCase().localeCompare((map[b] || '').toLowerCase());\n    });\n\n    keys.forEach(function (slug) {\n      var opt = $('<option/>', { value: slug, text: map[slug] || slug });\n      if (Array.isArray(selected) && selected.indexOf(slug) !== -1) {\n        opt.prop('selected', true);\n      }\n      $select.append(opt);\n    });\n  }\n\n  function loadCategories(site_url) {\n    console.log('loadCategories');\n    var $select = $('#rrze-answers_remote_categories_faq_');\n    // setSelectName($select, site_url);\n\n    console.log('loadCategories 2');\n\n    if (!site_url) {\n      $select.empty();\n      setStatus('', false);\n      setHelp('');\n      return;\n    }\n\n    setStatus(RRZEAnswersSync.i18n.loading, false);\n    setHelp('');\n\n     var url = RRZEAnswersSync.ajaxUrl;\n  var payload = {\n    action: 'rrze_answers_get_categories',\n    _ajax_nonce: RRZEAnswersSync.nonce,\n    site_url: site_url\n  };\n\n    console.group('loadCategories debug');\n  console.log('AJAX URL:', url);\n  console.log('Payload:', payload);\n  console.log('Full URL (GET-style):', url + '?' + jQuery.param(payload));\n\n    $.ajax({\n      url: RRZEAnswersSync.ajaxUrl,\n      type: 'POST',\n      dataType: 'json',\n      data: {\n        action: 'rrze_answers_get_categories',\n        _ajax_nonce: RRZEAnswersSync.nonce,\n        site_url: site_url\n      }\n    })\n      .done(function (resp) {\n\n\n          console.log('resp', resp);\n\n\n        if (!resp || !resp.success) {\n          setStatus((resp && resp.data && resp.data.message) || RRZEAnswersSync.i18n.error, true);\n          return;\n        }\n        var cats = resp.data.categories || {};\n        var selected = resp.data.selected || [];\n\n        if (Object.keys(cats).length === 0) {\n          populateCategories($select, {}, []);\n          setStatus(RRZEAnswersSync.i18n.none, false);\n          setHelp('');\n          return;\n        }\n\n        populateCategories($select, cats, selected);\n        setStatus('', false);\n        setHelp(RRZEAnswersSync.i18n.selectCategories);\n      })\n      .fail(function () {\n        setStatus(RRZEAnswersSync.i18n.error, true);\n      });\n  }\n\n  $(function () {\n    var $site = $('#rrze-answers_remote_url_faq');\n    var initial = $site.val() || '';\n\n    // Initial load (use currently selected site if present)\n    loadCategories(initial);\n\n    // On change: fetch & populate\n    $site.on('change', function () {\n      var site_url = $(this).val() || '';\n      loadCategories(site_url);\n    });\n  });\n})(jQuery);\n"],"names":["$","setSelectName","$select","site_url","optionName","RRZEAnswersSync","key","attr","setStatus","msg","isError","text","css","color","setHelp","populateCategories","map","selected","empty","keys","Object","sort","a","b","toLowerCase","localeCompare","forEach","slug","opt","value","Array","isArray","indexOf","prop","append","loadCategories","console","log","i18n","loading","url","ajaxUrl","payload","action","_ajax_nonce","nonce","group","jQuery","param","ajax","type","dataType","data","done","resp","success","message","error","cats","categories","length","none","selectCategories","fail","$site","initial","val","on"],"sourceRoot":""}